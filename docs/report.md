# 作业报告

李乐程 李奕杉 闵安娜





## 成员分工

李乐程：元数据管理模块、并发控制模块、重启恢复模块

李奕杉：查询模块、存储模块、功能测试、性能测试

闵安娜：存储模块



## 系统设计

在提供的框架上进一步扩展。

#### 元数据管理模块

用户对数据库和表的操作语句会纪录在`.script`文件中。 `manager.script`用于纪录数据库的创建和删除，`db.script`纪录数据库`db`的表的创建和删除。以上文件在用户操作时自动创建修改，并用于系统重启时加载数据。

#### 存储模块



#### 查询模块



#### 并发控制模块

我们实现了`LockManager`以纪录每个客户端调用的锁和表，并存储在支持并行的HashMap中。当用户提交时，`LockManager`会释放持有的锁以及对相应表进行持久化。

系统共实现了两个隔离级别：`read committed`和`serializable`，用户可透过指令在事务开始前修改隔离级别。

#### 重启恢复模块

系统为每个`Database`增设一个`Logger`，用于控制数据库的日志纪录。系统只有在事务进行期间才会进行纪录，而且在事务结束持久化时清空日志，在重启时会读取日志以恢复未提交的操作。目前只支持单一事务的恢复，因此不保证对同一个数据库进行多事务并发后的重启恢复。



## 测试报告

功能测试

性能测试



## 加分点